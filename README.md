# Data-Analysis-Capstone
## 공공데이터를 이용한 농산물 가격 예측 시스템 개발
소프트웨어융합학과 17학번 강성문
## 1. 개요
### 1.1. 과제 선정 배경
- 인류의 생존에 필수적인 농산물은 우리와 떼어 놓을 수 없는 존재이며, 농산물의 가격은 소비하는 개인과 판매하는 농업인, 정부 모두에게 매우 중요하다. 특히, 코로나 사태가 지속되면서 부족한 농작물에 대한 수입이 어려워지면서 농산물 가격이 급등하기도 한다. 이에 따라, 기존의 데이터를 이용하여 미래의 농산물 가격을 예측하는 것은 정부의 농산물 수급 정책 수립에도 중요한 역할을 할 것이며 소비자와 농업인에게도 중요한 지표가 될 것이다.
### 1.2. 과제 주요 내용
- 농산물의 가격은 단편적으로 해석, 추측하기 어려운 경향이 있다. 가격에 영향을 미치는 요인은 기상, 가격, 거래량, 물가 상승률, 유가, 수출입량, 재배 면적 등 다양하지만, 그 중에서도 가장 메인이 되는 기상, 가격, 거래량 데이터를 이용한다. 해당 데이터들을 수집하여 전처리, 이상치 탐지, 정규화 등의 과정을 거친 뒤, 머신러닝 및 딥러닝 모델들을 이용해 학습시킨다. 농산물의 가격은 당일의 기상 데이터와 거래량 데이터가 아닌 그 이전 4주간의 거래량, 가격, 기상 데이터를 바탕으로 예측된다.
- 이번 프로젝트에서는 배추, 무, 양파, 건고추, 마늘, 대파, 얼갈이배추, 양배추, 깻잎, 시금치, 미나리, 당근, 파프리카, 새송이, 팽이버섯, 토마토, 청상추, 백다다기, 애호박, 캠벨얼리, 샤인마스캇 총 21개의 작물에 대하여 가격 예측을 진행한다. 
### 1.3. 과제 목표
- 입력받은 일자의 1주 뒤, 2주 뒤, 4주 뒤의 가격을 예측하는 것을 목표로 한다. 예를 들어, 2021년 12월 31일의 데이터를 입력으로 한다면, 1월 7일, 1월 14일, 1월 28일의 가격을 수치형으로 예측한다. 모델의 성능 평가 지표는 NMAE(Normalized Mean Absolute Error)를 사용하며, 해당 값이 0.2가 넘지 않게 하는 것을 목표로 한다.


## 2. Dataset
### 2.1. 데이터 수집
이번 프로젝트에서는 2016년 1월 1일부터 2020년 9월 28일까지의 데이터를 학습용 데이터셋으로 수집하며, 2020년 9월 29일 + 1week부터 2020년 11월 5일 + 4week 까지를 테스트 데이터셋으로 수집한다.
#### 2.1.1. 기상 데이터 수집
- 공공데이터 포털에서 API Key를 발급받아 데이터 수집을 진행한다.
- 농촌진흥청 국립농업과학원 농업기상 데이터: https://www.data.go.kr/data/15078057/openapi.do
#### 2.1.2. 농산물 거래량 및 가격 데이터 수집
- 농넷에서 API Key를 발급받아 전국도매시장 거래정보 데이터를 수집한다.  
- 농넷 | 농산물유통종합정보시스템: https://nongnet.or.kr
### 2.2. 데이터 전처리
#### 2.2.1. 기상 데이터 전처리
- 기상 데이터를 활용하기에 앞서 각 농산물별로 생산량이 가장 많은 주산지를 선정하고, 해당 지역의 기상 정보를 메인으로 사용한다.
- 생산량은 앞서 수집한 농산물 거래정보 데이터에서 2019년의 1년치 생산량을 통해 정렬한다.
- 주산지를 알았다면, 카카오맵 API를 이용하여 위도와 경도를 구하고 이에 맞는 기상 관측 지점을 찾는다. 아래 그림에서 빨간색 표시가 주산지의 기상 관측 지점을 나타낸다.
###
![image](https://user-images.githubusercontent.com/65675861/144603118-85d89bcb-1db8-4146-8dea-5e82810e9966.png)
###
#### 2.2.2. 가격 및 거래량 데이터 전처리
- 앞서 수집한 거래정보 데이터에서 일자별 전국 농산물 평균 가격과 전국 거래량의 합을 추출한다.
- 배추의 가격 및 거래량 데이터 예시

![image](https://user-images.githubusercontent.com/65675861/144603780-d1f57b91-b9ee-406e-9f18-6a38804d8b71.png)

 
